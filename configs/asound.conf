# ReticulumHF ALSA Configuration
# Configures USB audio device (Digirig or similar) for freedvtnc2
#
# This file should be installed to /etc/asound.conf

# Disable the modem PCM type which causes "Unknown PCM cards.pcm.modem" error
# This is a known issue with ALSA when using USB audio devices
pcm.!modem {
    type null
}

ctl.!modem {
    type null
}

# Define USB audio as a named device
# freedvtnc2 uses PortAudio which will enumerate these devices
pcm.usbaudio {
    type hw
    card 1
    device 0
}

ctl.usbaudio {
    type hw
    card 1
}

# Software mixing for USB audio (allows multiple applications to use the device)
pcm.usbmix {
    type dmix
    ipc_key 1024
    slave {
        pcm "usbaudio"
        period_time 0
        period_size 1024
        buffer_size 4096
    }
}

# Duplex device for simultaneous input/output
pcm.usbduplex {
    type asym
    playback.pcm "usbmix"
    capture.pcm "usbaudio"
}

# Default device - use built-in audio to avoid conflicts
# freedvtnc2 explicitly selects its device via PortAudio
defaults.pcm.card 0
defaults.ctl.card 0
